(this["webpackJsonpfull-stack"]=this["webpackJsonpfull-stack"]||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(2),u=n(0),c=n.n(u),o=n(14),l=n.n(o),i=function(e){var t=e.notification;return c.a.createElement("div",{className:t.status},t.message)},s=function(e){var t=e.person,n=e.handleDelete;return c.a.createElement("div",null,t.name," ",t.number," ",c.a.createElement("button",{onClick:n(t.id)},"delete"))},m=function(e){var t=e.persons,n=e.handleDelete;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(s,{key:e.name,person:e,handleDelete:n})})))},f=function(e){var t=e.newFilter,n=e.handleFilter;return c.a.createElement("div",null,"filter shown with",c.a.createElement("input",{value:t,onChange:n}))},d=function(e){return c.a.createElement("div",null,e.name," :",c.a.createElement("input",{value:e.value,onChange:e.handleValue}))},h=function(e){var t=e.name,n=e.number,a=e.handlers,r=a.handlePerson,u=a.handleName,o=a.handleNumber;return c.a.createElement("form",{onSubmit:r},c.a.createElement(d,{name:"name",value:t,handleValue:u}),c.a.createElement(d,{name:"number",value:n,handleValue:o}),c.a.createElement("button",{type:"submit"},"add"))},b=n(3),p=n.n(b),E="/api/persons",v=function(e){return p.a.post(E,e).then((function(e){return e.data}))},g=function(){return p.a.get(E).then((function(e){return e.data}))},w=function(e){return p.a.delete("".concat(E,"/").concat(e)).then((function(e){return e.data}))},O=function(e){return p.a.put("".concat(E,"/").concat(e.id),e).then((function(e){return e.data}))},j=(n(37),function(){var e=Object(u.useState)([]),t=Object(r.a)(e,2),n=t[0],o=t[1],l=Object(u.useState)(""),s=Object(r.a)(l,2),d=s[0],b=s[1],p=Object(u.useState)(""),E=Object(r.a)(p,2),j=E[0],k=E[1],N=Object(u.useState)(""),P=Object(r.a)(N,2),S=P[0],y=P[1],C=Object(u.useState)(""),D=Object(r.a)(C,2),F=D[0],J=D[1],V=new RegExp(S,"i"),x=n.filter((function(e){return e.name.match(V)}));return Object(u.useEffect)((function(){g().then((function(e){return o(e)})).catch((function(e){return console.log("Failed to fetch JSON")}))}),[]),c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(f,{newFilter:S,handleFilter:function(e){return y(e.target.value)}}),c.a.createElement("h2",null,"add a new"),F&&c.a.createElement(i,{notification:F}),c.a.createElement(h,{name:d,number:j,handlers:{handlePerson:function(e){e.preventDefault();var t=n.find((function(e){return e.name.toLowerCase()===d.trim().toLowerCase()}));if(d&&j)if(t){window.confirm("".concat(d," is already added to the phonebook, replace old number with new one?"))&&O(Object(a.a)(Object(a.a)({},t),{},{number:j})).then((function(e){o(n.filter((function(e){return e.id!==t.id})).concat(e)),J({message:"Person Updated",status:"success"})})).catch((function(e){J({message:e.response.data,status:"fail"}),404===e.response.status&&o(n.filter((function(e){return e!==t})))}))}else{var r={name:d.trim(),number:j.trim()};v(r).then((function(e){o(n.concat(e)),J({message:"Person Added",status:"success"})})).catch((function(e){J({message:e.response.data,status:"fail"})}))}else J({message:"Please enter a name and number",status:"fail"});setTimeout((function(){return J("")}),3e3),b(""),k(""),y("")},handleName:function(e){return b(e.target.value)},handleNumber:function(e){return k(e.target.value)}}}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(m,{persons:x,handleDelete:function(e){return function(){window.confirm("Are you sure you want to delete this contact?")&&w(e).then((function(){o(n.filter((function(t){return t.id!==e}))),J({message:"Person deleted",status:"success"}),setTimeout((function(){return J("")}),2500)})).catch((function(t){J({message:t.response.data,status:"fail"}),o(n.filter((function(t){return t.id!==e})))}))}}}))});l.a.render(c.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.2c5e2070.chunk.js.map